<mvc:View
    controllerName="sap.employees.exc.controller.EmployeeList"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core"
    core:require="{formatter: 'sap/employees/exc/model/Formatter'}">

    <Page title="{i18n>employeeListTitle}" showNavButton="false">
        
        <headerContent>
            <Toolbar class="sapUiMediumMargin">
                <ToolbarSpacer />
                <Button 
                    icon="sap-icon://refresh" 
                    text="Refresh"
                    tooltip="Refresh Data"
                    type="Transparent"
                    press="onRefresh"
                    class="sapUiTinyMarginEnd" />
            </Toolbar>
        </headerContent>

        <content>
            <Panel headerText="Employee Directory" 
                   expandable="false" 
                   expanded="true"
                   width="auto"
                   class="sapUiResponsiveMargin">
                   
                <headerToolbar>
                    <Toolbar class="sapUiResponsiveContentPadding">
                        <Title text="Total Employees: {= ${/employees}.length }" level="H4" />
                        <ToolbarSpacer />
                        <!-- <Button 
                            text="Add Employee" 
                            icon="sap-icon://add"
                            type="Emphasized"
                            press="onAddEmployee"
                            class="sapUiTinyMarginEnd" /> -->
                        <SearchField 
                            width="12rem"
                            placeholder="Search ..."
                            search="onSearch"
                            liveChange="onSearch" />
                    </Toolbar>
                </headerToolbar>

                <VBox class="sapUiContentPadding">
                    <Table id="employeeTable"
                           items="{/employees}"
                           mode= "None"
                           selectionChange="onEmployeeSelect"
                           growing="true"
                           growingThreshold="10"
                           width="100%"
                           fixedLayout="false">
                        
                        <columns>
                            <Column width="2.5rem">
                                <Text text="" />
                            </Column>
                            <Column width="auto" minScreenWidth="Tablet" demandPopin="true">
                                <header>
                                    <Text text="Name" />
                                </header>
                            </Column>
                            <Column width="auto" minScreenWidth="Desktop" demandPopin="true" hAlign="Begin">
                                <header>
                                    <Text text="Role" />
                                </header>
                            </Column>
                            <Column width="auto" minScreenWidth="Desktop" demandPopin="true" hAlign="Begin">
                                <header>
                                    <Text text="Department" />
                                </header>
                            </Column>
                            <Column width="auto" minScreenWidth="Tablet" demandPopin="true" hAlign="End">
                                <header>
                                    <Text text="Salary" />
                                </header>
                            </Column>
                            <Column width="2rem">
                                <Text text="" />
                            </Column>
                        </columns>

                        <items>
                            <ColumnListItem press="onEmployeePress" type="Active">
                                <cells>
                                    <core:Icon 
                                        src="{formatter: 'formatter.getDepartmentIcon', parts: ['department']}"
                                        color="Neutral"
                                        size="1.5rem" />
                                    
                                    <ObjectIdentifier 
                                        title="{name}"
                                        titleActive="true" />
                                    
                                    <Text 
                                        text="{formatter: 'formatter.formatRole', parts: ['role']}"
                                        maxLines="1" />
                                    
                                    <Text 
                                        text="{department}"
                                        maxLines="1" />
                                    
                                    <ObjectNumber 
                                        number="{formatter: 'formatter.formatSalary', parts: ['salary']}"
                                        state="Success"
                                        textAlign="End" />

                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </VBox>
            </Panel>
        </content>

    </Page>
</mvc:View>